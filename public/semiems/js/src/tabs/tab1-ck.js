//Document ready
function addOpt(oCntrl,iPos,sTxt,sVal){var selOpcion=new Option(sTxt,sVal);eval(oCntrl.options[iPos]=selOpcion)}function calculo_puertas(e){while(e.length)e.remove(0);switch(document.frm.puerta.selectedIndex){case 0:$("#type").text("puertas");break;case 1:$("#type").text("modulos");var t=600,n=1200;if(document.frm.mancho.value<t){addOpt(e,0,"Imposible",0);break}var r=1,i=1,s=1,o=1;while(o!=0){var u=document.frm.mancho.value/r;u>n?i+=1:u<=n&&u>=t?s=r:u<t&&(o=0);r++}var a=s-i+1;for(var f=0;f<a;f++)addOpt(e,f,f+i,f+i);puertas_impares_bat();break;case 2:$("#type").text("puertas");var t=300,n=600;if(document.frm.mancho.value<t){addOpt(e,0,"Imposible",0);break}var r=2,i=2,s=2,o=1;while(o!=0){var u=document.frm.mancho.value/r;u>n?i+=1:u<=n&&u>=t?s=r:u<t&&(o=0);r++}var a=s-i+1;for(var f=0;f<a;f++)addOpt(e,f,f+i,f+i);puertas_impares_bat();break;case 3:$("#type").text("puertas");var t=600,n=1200;if(document.frm.mancho.value<t){addOpt(e,0,"Imposible",0);break}var r=1,i=1,s=1,o=1;while(o!=0){var u=document.frm.mancho.value/r;u>n?i+=1:u<=n&&u>=t?s=r:u<t&&(o=0);r++}var a=s-i+1;for(var f=0;f<a;f++)addOpt(e,f,f+i,f+i);puertas_impares_bat()}}function puertas_impares_bat(){document.getElementById("puertas_imp_bat").innerHTML="";if(document.frm.npuertas.value%2!=0&&document.frm.puerta.value==1){var e=document.getElementById("puertas_imp_bat");e.innerHTML="Posicion puerta impar:<select name='donde_imp' data-intro ='Posicion de la puerta individual.' data-position='right'></select>";var t=0,n=parseInt(document.frm.npuertas.value)+1;for(var r=0;r<n;r++)if(r%2!=0){addOpt(document.frm.donde_imp,t,r,r);t++}}}$(document).ready(function(){$("a.next-tab").on("click",function(e){if($("body").data("wardrobe")==""){WardrobeModel.initialize();WardrobeModel.guardarJson()}else{WardrobeModel.rebuildData();WardrobeModel.save()}});App.History.saveWardrobe();if($("body").data("wardrobe")!=""){$(document).bind("sync",function(){wardrobe=WardrobeModel.getWardrobe();document.frm.name.value=wardrobe.data.name;document.frm.malto.value=wardrobe.data.height;document.frm.mancho.value=wardrobe.data.width;document.frm.mprof.value=wardrobe.data.prof;document.frm.puerta.value=wardrobe.data.typedoor;calculo_puertas(document.frm.npuertas);document.frm.npuertas.value=wardrobe.data.doors;puertas_impares_bat();document.frm.npuertas.value%2!=0&&document.frm.puerta.value==1&&(document.frm.donde_imp.value=wardrobe.data.paritypos)});WardrobeModel.fetch()}$(document).bind("sync_save",function(){App.Navigator.goNext()})});var validate_real=function(e){$context=$(e);var t=[{name:"malto",min:500,max:3e3},{name:"mancho",min:500,max:5e3},{name:"mprof",min:500,max:680}],n=function(e){return e.from_context===""?{status:!1,message:"Hay que rellenar este campo"}:isNaN(e.from_context)?{status:!1,message:"Solo se permiten números"}:e.from_context<e.min?{status:!1,message:"La medida es inferior al mínimo ("+e.min+"mm)"}:e.from_context>e.max?{status:!1,message:"La medida es superior al máximo ("+e.max+"mm)"}:{status:!0,message:"Correcto"}},r=function(e){e.from_context=function(){return $context.val()!==""?parseInt($context.val()):$context.val()}.call();var t=function(){console.log("Attribute "+e.name+" changed to "+$context.val())},r;if($context.attr("name")===e.name){t();r=n(e);console.log(r);if(r!==null){r.status===!0?$context.css({background:"rgba(124, 255, 95, 0.62)"}):$context.css({background:"rgba(255, 49, 37, 0.35)"});$context.parent().find(".message").text(r.message)}}};t.forEach(r,this)};